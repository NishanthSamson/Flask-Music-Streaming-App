{% extends "security/base.html" %}

{% from "security/_macros.html" import render_field_with_errors, render_field, render_field_errors, render_form_errors, prop_next %}
{% block html_attribs %}
  {{ super() }}
  data-bs-theme="dark"
{% endblock %}
{% block styles %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
<link rel="icon" href="{{ url_for('static', filename='favicon.png') }}" type="image/png">
<title>StreamWave</title>
{% endblock %}
{% block content %}
  {% include "security/_messages.html" %}
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <h1 class="mt-4 mb-4">{{ _fsdomain('Login') }}</h1>
        <form action="{{ url_for_security('login') }}{{ prop_next() }}" method="post" name="login_user_form">
          {{ login_user_form.hidden_tag() }}
          {{ render_form_errors(login_user_form) }}
          {% if "email" in identity_attributes %}
            <div class="form-group mb-2">
              {{ render_field_with_errors(login_user_form.email, class="form-control") }}
            </div>
          {% endif %}
          {% if login_user_form.username and "username" in identity_attributes %}
            {% if "email" in identity_attributes %}
              <h3>{{ _fsdomain("or") }}</h3>
            {% endif %}
            <div class="form-group mb-2">
              {{ render_field_with_errors(login_user_form.username, class="form-control") }}
            </div>
          {% endif %}
          <div class="form-group mb-2">
            {{ render_field_with_errors(login_user_form.password, class="form-control") }}
          </div>
          <div class="form-check mb-3">
            {{ render_field_with_errors(login_user_form.remember, class="form-check-input") }}
            <!-- <label class="form-check-label" for="{{ login_user_form.remember.id }}">{{ _fsdomain('Remember Me') }}</label> -->
          </div>
          {{ render_field_errors(login_user_form.csrf_token) }}
          <button type="submit" class="btn btn-primary">{{ _fsdomain('Login') }}</button>
        </form>
        {% if security.webauthn %}
          <hr class="my-4">
          <h2>{{ _fsdomain("Use WebAuthn to Sign In") }}</h2>
        {% endif %}
        {% if security.oauthglue %}
          <hr class="my-4">
          <h2>{{ _fsdomain("Use Social Oauth to Sign In") }}</h2>
        {% endif %}
      </div>
    </div>
  </div>
  {% include "security/_menu.html" %}
{% endblock content %}